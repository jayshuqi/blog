项目基于vue-router采用“登录态校验 + 动态路由 + 细粒度指令”的多层路由鉴权方案，核心要点如下：

- 全局前置守卫
    - 校验是否登录，是否有页面的访问权限，获取用户信息和后台配置路由，addRoute注册。
- 动态路由
    - 后端返回多级菜单树或权限配置，前端将菜单映射为路由表，保存权限配置。
- 细粒度权限指令
    - 基于自定义指令 v-permission，对按钮级能力做显示/禁用/隐藏

细节：
- 路由的配置中，component的获取通过import.meta.glob('@/views/**/*.vue')；一级的path要以/开头，children中的不能以/开头；

```javascript
// 自定义指令
export const permission: Directive = {
  mounted(el, binding) {
    const { value } = binding
    if (!checkPermission(value)) {
      el.parentNode?.removeChild(el)
    }
  }
}
export function loadDirectives(app: App) {
  app.directive("permission", permission)
}
const app = createApp(App)
loadDirectives(app)
```
