```javascript
function createServie() {
    const service = axios.create()
    
    service.interceptors.response.use(
        (response) => {
            const code = response.data.code
            switch(code) {
                case 200:
                    return response.data
                default:
                    ElMessage.error(response.data.message)
                    return Promise.reject(new Error(response.data.message))
            }
        },
        (error) => {
            const status = _.get(error, 'response.status')
            switch(status) {
                case 401:
                    logout()
                    location.reload()
                    break
                case 403:
                    error.message = "拒绝访问"
                    break
                default:
                    break
            }
            ElMessage.error(error.message)
            return Promise.reject(error)
        }
    )
    return service
}

function createRequest(service, baseUrl) {
    return function(config) {
        const defaultConfig = {
            headers: {
                Authorization: getToken()
            },
            timeout: 60 * 1000,
            baseURL: baseUrl,
            data: {}
        }
        const mergeConfig = _.merge(defaultConfig, config)
        return service(mergeConfig)
    }
}

const service = createServie()

const request = createRequest(service, import.meta.env.VITE_BASE_API)
```
